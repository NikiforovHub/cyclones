Идея: в функции find_contour задавать не точное значение при проверке равенства, а небольшой промежуток. Тогда и округления проводить не нужно.